//  let coupon_data=[{
//     id:1,
//     image:"",
//     title:"",
//     location:"",
//     badge:"",
//     badge_text:"",
//     price:"",
//     cost:"",
//     bought:"",
//  },]


let coupon_data = [
    {
        id: 37,
        image: "https://img4.nbstatic.in/tr:w-350/5f6476c0b7b01c000b8cfed9.jpg",
        title: "Lord of the Drinks Chamber",
        location: "Rajouri Garden Main Market, Rajouri Garden",
        badge: "Deals",
        badge_text: "",
        price: 1899,
        cost: "Drinks with Starters from 1899",
        bought: "12,756"
        },
        {
        id: 38,
        image: "https://img4.nbstatic.in/tr:w-350/5f5782eab7b01c000b3d8fdf.jpg",
        title: "Warehouse Cafe",
        location: "Connaught Place",
        badge: "Deals",
        badge_text: "",
        price: 2399,
        cost: "Drinks with Starters from 2399",
        bought: "4,727"
        },
        {
        id: 39,
        image: "https://img4.nbstatic.in/tr:w-350/61c41a491e2731000ba4280d.jpg",
        title: "TEO - Lounge & Bar",
        location: "Club Road Market, Punjabi Bagh West",
        badge: "Deals",
        badge_text: "",
        price: 700,
        cost: "Drinks with Starters from 700",
        bought: "10,718"
        },
        {
        id: 40,
        image: "https://img4.nbstatic.in/tr:w-350/5fdcaf2b5cc6f2000b960679.jpg",
        title: "MAD - Music and Drinks",
        location: "Rajouri Garden",
        badge: "Deals",
        badge_text: "",
        price: 699,
        cost: "Drinks with Starters from 699",
        bought: "4,118"
        },
        {
        id: 41,
        image: "https://img4.nbstatic.in/tr:w-350/602102ec79600c000b33e564.jpg",
        title: "Duty-Free | Vayu Bar",
        location: "Rajouri Garden Main Market, Rajouri Garden",
        badge: "Deals",
        badge_text: "",
        price: 799,
        cost: "Drinks with Starters from 799",
        bought: "6,369"
        },
        {
        id: 42,
        image: "https://img4.nbstatic.in/tr:w-350/6114a79a1e2731000b7036ee.jpg",
        title: "Open House Cafe",
        location: "Connaught Place",
        badge: "Deals",
        badge_text: "",
        price: 1299,
        cost: "Drinks with Starters from 1299",
        bought: "3,830"
        },
        {
            id: 43,
            image: "https://img4.nbstatic.in/tr:w-350/5f55dda1b7b01c000b3d89a7.jpg",
            title: "[A WHOLESALE BAR]",
            location: "Local Connaught Place",
            badge: "DEALS",
            badge_text: "",
            price: 1199,
            cost: "Drinks with Starters & Set Menu Meals from 1199",
            bought: "3,595"
            },
            {
            id: 44,
            image: "https://img4.nbstatic.in/tr:w-350/63c51a3622b317000b619d07.jpg",
            title: "Station Cafe and Bar",
            location: "Connaught Place",
            badge: "DEALS",
            badge_text: "",
            price: 1899,
            cost: "Drinks with Starters from 1899",
            bought: "1,856"
            },
            {
            id: 45,
            image: "https://img4.nbstatic.in/tr:w-350/5d3adf98590801000cddde91.jpg",
            title: "CIVTH EMPIRICA DINE BAR",
            location: "Club Road Market, Punjabi Bagh West",
            badge: "DEALS",
            badge_text: "",
            price: 1049,
            cost: "Drinks with Starters from 1049",
            bought: "3,690"
            },
            {
            id: 46,
            image: "https://img4.nbstatic.in/tr:w-350/5f588bdcb7b01c000b3d91a7.jpg",
            title: "LORD DRINKS",
            location: "Connaught Place",
            badge: "DEALS",
            badge_text: "",
            price: 1429,
            cost: "Drinks with Starters from 1429",
            bought: "1,230"
            },
            {
            id: 47,
            image: "https://img4.nbstatic.in/tr:w-350/5c249ecee21b84000de0a737.jpg",
            title: "TIEN 120",
            location: "Liv Bar Aerocity",
            badge: "DEALS",
            badge_text: "",
            price: 1299,
            cost: "Drinks with Starter from 1299",
            bought: "2,397"
            },
            {
            id: 48,
            image: "https://img4.nbstatic.in/tr:w-350/5e284308d60180000dbbd915.jpg",
            title: "Fifty 9",
            location: "Fifty9 - Radisson Blu Marina Hotel Connaught Place",
            badge: "DEALS",
            badge_text: "",
            price: 1500,
            cost: "Buffet Offers from 1500",
            bought: "1,412"
            },
            {
                id: 49,
                image: "https://img4.nbstatic.in/tr:w-350/62dfd5c5b3c621000b6fbc09.jpg",
                title: "Infinity - Crowne Plaza",
                location: "Mayur Vihar Phase 1",
                badge: "DEALS",
                badge_text: "",
                price: 2299,
                cost: "Buffet Offers from 2299",
                bought: "821"
                },
                {
                id: 50,
                image: "https://img4.nbstatic.in/tr:w-350/61c474db40e9df000b237421.jpg",
                title: "Cafe High 5",
                location: "Connaught Place",
                badge: "DEALS",
                badge_text: "",
                price: 1599,
                cost: "Drinks with Starters from 1599",
                bought: "894"
                },
                {
                id: 51,
                image: "https://img4.nbstatic.in/tr:w-350/6108d4f71e2731000bfb1d1f.jpg",
                title: "Tatva - Country Inn & Suites By Radisson",
                location: "Sahibabad",
                badge: "DEALS",
                badge_text: "",
                price: 1550,
                cost: "Drinks with Starters from 1550",
                bought: "704"
                },
                {
                id: 52,
                image: "https://img4.nbstatic.in/tr:w-350/620225d73b031b000b53e5fe.jpg",
                title: "Savannah Bar - The Radisson Blu Plaza",
                location: "Mahipalpur",
                badge: "DEALS",
                badge_text: "",
                price: 1895,
                cost: "Drinks with Starters from 1895",
                bought: "720"
                },
                {
                id: 53,
                image: "https://img4.nbstatic.in/tr:w-350/61c44e7f1e2731000ba42909.jpg",
                title: "NYC - Radisson Blu Plaza Delhi Airport",
                location: "IGI T3 Road, Mahipalpur",
                badge: "DEALS",
                badge_text: "",
                price: 3999,
                cost: "Buffet Offers from 3999",
                bought: "594"
                },
                {
                id: 54,
                image: "https://img4.nbstatic.in/tr:w-350/5f7830c6b7b01c000b8d28ee.jpg",
                title: "Imperfecto Cheer",
                location: "",
                badge: "DEALS",
                badge_text: "",
                price: 699,
                cost: "Beer & Drinks with Starters from 699",
                bought: "585"
                }
];

// filtering in ascening order
let asc=document.getElementById("asc");
asc.addEventListener("change",function(){
    let asc_data=coupon_data.sort(function(a,b){
        return a.price-b.price;
    });
    create_card(asc_data);
});

let desc=document.getElementById("desc");
desc.addEventListener("change",function(){
    let desc_data=coupon_data.sort(function(a,b){
        return b.price-a.price;
    });
    create_card(desc_data);
});

let Connaught_place=document.getElementById("Connaught_Place");
Connaught_place.addEventListener("change",function(){
    let Connaught_place_data=coupon_data.filter(function(element){
        return element.location=="Connaught Place";
    });
    create_card(Connaught_place_data);
});




let cart=JSON.parse(localStorage.getItem("cart"))||[];


//  catching div from html

const coupon_div=document.getElementById("coupon_div");

//  creating function to display data

function create_card(coupon_data){
    coupon_div.innerHTML="";
    coupon_data.forEach(function(element){
        let card_container=document.createElement("div");
        card_container.classList.add("col");


        let card=document.createElement("div");
        card.classList.add("card", "h-100","COSTOMIZATION_ON_CARD");
        button=document.createElement("button");
        // button.classList.add("");
        button.innerText="Buy Now";

        card.innerHTML=`
        <img src="${element.image}" class="card-img-top" alt="...">
        <div class="card-body">
          <h5 class="card-title">${element.title}</h5>
          <p class="card-text">${element.location}</p>
          <div>
              <span class="badge bg-primary">${element.badge}</span>
              <span>${element.badge_text}</span>
          </div>
          <p>â‚¹${element.cost}</p>
        </div>
        <div class="card-footer">
            <small class="text-muted">${element.bought} bought</small>
        </div>
        `;
        card.append(button);
        button.addEventListener("click",function(){
            // console.log(clicked);
            if(checkDuplicate(element.id)){
                alert("already added to cart");
            }
            else{
                cart.push(element);
                localStorage.setItem("cart",JSON.stringify(cart));
                alert("added to cart");
            }

        });
        card_container.append(card);
        coupon_div.append(card_container);
    })
}

// calling function
create_card(coupon_data);


function checkDuplicate(id){
    for (let i = 0; i < cart.length; i++) {
        if(cart[i].id==id){
            return true;
        }
        
    }
    return false;
    
}